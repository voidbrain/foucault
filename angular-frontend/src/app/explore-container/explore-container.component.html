<ion-content>
  <ion-header>
    <ion-toolbar>
      <ion-title>Explore Container</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-grid>
    <ion-row>
      <!-- Three.js Canvas on the left side -->
      <ion-col size="6">
        <div
          id="threejs-container"
          #threejsContainer
          style="width: 100%; height: 500px"
        ></div>
      </ion-col>

      <ion-col size="6">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Controls</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-grid>
              <ion-row>
                <ion-col size="6">
                  <div>
                    <ion-range
                      [value]="heightLevel"
                      min="1"
                      max="3"
                      step="1"
                      snaps="true"
                      color="primary"
                      (ionChange)="adjustHeightEventFromSlider($event)"
                    >
                      <ion-label slot="start">1</ion-label>
                      <ion-label slot="end">3</ion-label> </ion-range
                    >{{ heights[heightLevel-1] }}
                  </div>
                  <div>
                    <ion-toggle
                      [checked]="isSensorAdjustmentEnabled"
                      (ionChange)="toggleEnableSensor()"
                      >Enable Sensor Adjustments</ion-toggle
                    >
                  </div>
                  <div>
                    <ion-button (click)="sendStopCommand()"
                      >Stop</ion-button
                    >
                  </div>
                </ion-col>
                <ion-col size="6">
                  <ion-grid>
                    <ion-row>
                      <ion-col size="3" class="ion-text-center">
                        
                         
                            <input
                              [(ngModel)]="Kp"
                              type="number"
                              placeholder="Kp"
                              (change)="updatePID()"
                            />
                          
                        
                      </ion-col>
                  
                      <ion-col size="3" class="ion-text-center">
                        
                          
                       
                          <input
                            [(ngModel)]="Ki"
                            type="number"
                            placeholder="Ki"
                            (change)="updatePID()"
                          />
                        
                        
                      </ion-col>
                  
                      <ion-col size="3" class="ion-text-center">
                        
                          
                       
                          <input
                            [(ngModel)]="Kd"
                            type="number"
                            placeholder="Kd"
                            (change)="updatePID()"
                          />
                        
                        
                      </ion-col>
                      <ion-col size="3" class="ion-text-center">
                        
                          
                       
                          <input
                            [(ngModel)]="incrementDegree"
                            type="number"
                            placeholder="incrementDegree"
                            (change)="updateIncrementDegree()"
                          />
                        
                        
                      </ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col size="12" class="ion-text-center">
                        <ion-button (click)="sendControlCommand('forward')"
                        [class]="walkForwardActive ? 'pulse-effect' : ''"
                          >W</ion-button
                        >
                      </ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col size="4" class="ion-text-center">
                        <ion-button (click)="sendControlCommand('left')"
                        [class]="walkLeftActive ? 'pulse-effect' : ''"
                          >A</ion-button
                        >
                      </ion-col>
                      <ion-col size="4" class="ion-text-center">
                        <ion-button (click)="sendControlCommand('backward')"
                        [class]="walkBackwardActive ? 'pulse-effect' : ''"
                          >S</ion-button
                        >
                      </ion-col>
                      <ion-col size="4" class="ion-text-center">
                        <ion-button (click)="sendControlCommand('right')"
                        [class]="walkRightActive ? 'pulse-effect' : ''"
                          >D</ion-button
                        >
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>

        <ion-card>
          <ion-card-header>
            <ion-card-title>Raw Data</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-grid>
              <ion-row>
                <ion-col size="6">
                  <h2>Accelerometer</h2>
                  <ion-text [color]="isSensorAdjustmentEnabled ? 'primary' : 'secondary'" id="accelData-content">Loading...</ion-text>
                </ion-col>
                <ion-col size="6">
                  <h2>Tilt Data</h2>
                      <ion-text [color]="isSensorAdjustmentEnabled ? 'primary' : 'secondary'" id="tiltAngles-content">Loading...</ion-text>
                  </ion-col>
              </ion-row>
            </ion-grid>

           

            
          </ion-card-content>
        </ion-card>


        <ion-card>
          <ion-card-header>
            <ion-card-title>Output for Motors</ion-card-title>
          </ion-card-header>
          <ion-card-content>

            <ion-grid>
              <ion-row>
                <ion-col size="6">
                  <h2>Motor PWM</h2>
                      <div id="motor-content">
                        <span id="left-motor"
                          >Left Motor PWM: <span id="left-motor-value">_</span></span
                        ><br />
                        <span id="right-motor"
                          >Right Motor PWM: <span id="right-motor-value">_</span></span
                        >
                      </div>
                   </ion-col>
                <ion-col size="6">
                  <h2>Servo Pulse </h2>
                      <div id="servo-content">
                        <span id="left-servo"
                          >Left Servo Pulse:
                          <span id="left-servo-value">_</span>µs</span
                        ><br />
                        <span id="right-servo"
                          >Right Servo Pulse:
                          <span id="right-servo-value">_</span>µs</span
                        >
                      </div>
                    
                  </ion-col>
              </ion-row>
            </ion-grid>

            
          </ion-card-content>
        </ion-card>

        <ion-card>
          <ion-card-header>
            <ion-card-title>Console</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div>
              <ion-label>Auto Scroll</ion-label>
              <ion-toggle [(ngModel)]="isConsoleAutoScrollEnabled"></ion-toggle>
            </div>
            <div
              id="console-content"
              style="max-height: 200px; overflow-y: auto"
            ></div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
